# 3.5 애그리거트간 집합 연관
- 애그리거트간 1-N, M-N 연관을 컬렉션으로 구현해보자.

## 1-N
- 상품이 하나의 카테고리를 가질 수 있을 때를 예시로 들 수 있음.
- 1-N 연관은 Set 같은 컬렉션으로 표현할 수 있음.
- 아래는 카테고리가 연관된 상품을 갖는 것을 표현함.

```java
public class Cateogry {
    private Set<Product> products;
}
```

> 💡 하지만 개념적인 애그리거트간의 연관을 실제 구현에 반영하는 것이 요구사항을 충족하는 것과는 상관없을 수 있음.

만약 카테고리에 대한 상품을 페이징으로 조회해야하는 요구사항이 있다면,
카테고리의 상품을 DB 에서 '전부' 조회하고 페이지 처리를 해야할 것임.
이는 성능에 영향이 갈 것임.

이는 상품 입장에서의 N-1 연관을 이용할 수 있음.

```java
public class Product {
    private CategoryId categoryId;
}
```
이 연관으로 categoryId 에 해당하는 상품을 페이징하여 DB 에서 조회할 수 있게됨.

## M-N
- M-N 연관은 개념적으로 양쪽 애그리거트에 컬렉션으로 연관을 만들 수 있음.
- 하지만 위 내용과 동일하게 요구 사항을 충족하기 위한 실제 구현은 개념적인 연관과 다를 수 있음.