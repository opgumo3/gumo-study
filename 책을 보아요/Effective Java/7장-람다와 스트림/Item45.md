# Item 45. 스트림은 주의해서 사용하라
* 스트림 API는 다량의 데이터 처리 작업을 위해 Java 8에 추가됨.
* 스트림 안의 원소들은 객체 참조난 기본 타입 값이다.

## 스트림 API의 개념
### 1. 스트림
* 데이터 원소의 유한 혹은 무한 시퀀스
### 2. 스트림 파이프라인
* 원소들로 수행하는 연산 단계
* 소스 스트림에서 시작해서 종단 연산으로 끝나고, 그 사이에 하나 이상의 중간 연산이 있을 수 있음.
* 지연 평가됨. 평가는 종단 연산이 호출될 때 이뤄짐. 그래서 무한 스트림을 할 수 있음.

#### 중간연산
* 각 중간 연산은 스트림을 변환함.
* 중간 연산을 모두 한 스트림을 다른 스트림으로 변환함. </br>변환된 스트림의 원소 타입은 변환 전 스트림의 원소 타입과 같을 수도, 다를 수도 있음.

#### 종단연산
* 종단 연산은 중간 연산이 내놓은 스트림에 최후의 연산을 가함. (원소를 정렬해 컬렉션에 담거나, 원소를 선택하거나, 모든 원소 출력)

<hr>

* 스트림 API는 메서드 연쇄를 지원하는 플루언트 API
* 파이프라인을 병렬로 실행하려면 parallel 메서드를 호출해주면 되지만, 효과를 볼 수 있는 상황이 많지 않음. (Item 48)

## 스트림을 언제써야 할까
* 스트림을 제대로 사용하면 프로그램이 짧고 깔끔해지지만, 잘못 사용하면 읽기 어렵고 유지보수가 힘들어진다.
> 람다에서는 타입 이름을 자주 생략하므로 매개변수 이름을 잘 지어야 스트림 파이프라인의 가독성이 유지됨.
* 반복문을 스트림으로 바꾸기 전에, 새 코드가 더 나아 보이는 경우에만 반영하자.

### 코드 블록에서만 할 수 있는 일.
스트림 파이프라인은 되풀이되는 계산을 함수 객체로 표현한다.
</br> 반복 코드에서 사용하는 코드 블록에서만 할 수 있는 일이 있다.

* 코드 블록에서는 범위 안의 지역 변수를 읽고 수정할 수 있음. </br>
람다에서는 사실상 final인 변수만 읽을 수 있고 지역변수를 수정하는 건 불가능하다.
* 코드 블럭에서는 return/break/continue로 빠져나갈 수 있는데, 람다는 불가함.

### 스트림이 유용한 경우
* 원소들의 시퀀스를 일관되게 변환하는 경우.
* 필터링하는경우
* 하나의 연산을 사용해 결합하는 경우
* 컬렉션에 모으는 경우
* 특정 조건을 만족하는 원소를 찾는 경우

### 스트림으로 처리하기 어려운 경우
* 데이터가 파이프라인의 여러 단계를 통과할 때, 데이터의 각 단계에서의 값들에 동시에 접근하기 어려운 경우
* 값을 다른 값에 매핑하면 원래의 값을 잃기 때문에.


## 결론
가독성과 유지보수성을 생각하고 반복문과 스트림 중에 택해라.