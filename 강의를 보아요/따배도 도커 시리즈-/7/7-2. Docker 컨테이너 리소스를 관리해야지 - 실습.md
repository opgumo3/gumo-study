```
ğŸ”¥ WARNING: Your kernel does not support OomKillDisable. OomKillDisable discarded.
```
# ì»¨í…Œì´ë„ˆ ë¦¬ì†ŒìŠ¤ ì œí•œê³¼ ëª¨ë‹ˆí„°ë§
## ë¶€í•˜ í…ŒìŠ¤íŠ¸
- `stress` ë¥¼ ì´ìš©í•˜ì—¬ ë¶€í•˜ í…ŒìŠ¤íŠ¸

```sh
# CPU ë¶€í•˜ í…ŒìŠ¤íŠ¸
stress --cpu 2

# Memory ë¶€í•˜ í…ŒìŠ¤íŠ¸
stress --vm 2 --vm-bytes <ì‚¬ìš©í•  í¬ê¸°>
```

- ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì‹¤ìŠµí•œ ì»¨í…Œì´ë„ˆ ì‚­ì œ
```sh
# ëª¨ë“  ì»¨í…Œì´ë„ˆ ì‚­ì œ
docker rm -f $(docker ps -aq)
```

```
ğŸ‘‰ cgroup
ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì—ì„œ í”„ë¡œì„¸ìŠ¤ ì§‘í•©ì— ëŒ€í•´ ì‹œìŠ¤í…œ ìì›(CPU, ë©”ëª¨ë¦¬, I/O ë“±)ì„ ì œí•œí•˜ê³ , ê³„ì¸¡í•˜ë©°, ê´€ë¦¬í•˜ëŠ” ê¸°ëŠ¥
```

## ë©”ëª¨ë¦¬ ë¦¬ì†ŒìŠ¤ ì œí•œ
```sh
# (1)

# ì´ë¯¸ì§€ì˜ ê¸°ë³¸ CMD ë¬´ì‹œí•˜ê³  stress --vm 1 ... ì‹¤í–‰
# 1MB ë©”ëª¨ë¦¬ë¥¼ ì‚¬ìš©í•˜ëŠ” VM ì›Œì»¤ 1ê°œë¥¼ 5ì´ˆ ë™ì•ˆ ì‹¤í–‰
docker run -m 100m --memory-swap 200m stress stress --vm 1 --vm-bytes 1m -t 5s
# >> successful run completed in 5s


# (2)
docker run -m 100m --memory-swap 100m stress stress --vm 1 --vm-bytes 150m -t 5s
# >> failed run completed


# (3)
# swap ì‚¬ì´ì¦ˆë¥¼ ìƒëµí•˜ë©´ ë©”ëª¨ë¦¬ ìµœëŒ€ í¬ê¸°ì˜ 2ë°°ë¡œ ì„¤ì •
docker run -m 100m stress stress --vm 1 --vm-bytes 150m -t 5s
# >> successful run completed in 5s
```

## OOM Killer ë°©ì§€
```sh
docker run -d -m 100m --name m4 --oom-kill-disable=true nginx
# WARNING: Your kernel does not support OomKillDisable. OomKillDisable discarded.

docker inspect m4
# oomDisable ì˜µì…˜ í™•ì¸

# cgroup í´ë”ì—ì„œ ì„¤ì • í™•ì¸
cat /sys/fs/cgroup/memory/docker/<ì»¨í…Œì´ë„ˆID>/memory.oom_control
# Docker VM ì— ì§„ì…í•˜ì—¬ í™•ì¸ ê°€ëŠ¥
```

## CPU ë¦¬ì†ŒìŠ¤ ì œí•œ
ì•„ë˜ ëª…ë ¹ì–´ë¡œ CPU ì •ë³´ í™•ì¸
```sh
# CPU ì •ë³´ í™•ì¸
lscpu

# mac ì—ì„œëŠ” ì•„ë˜ ëª…ë ¹ì–´ë¡œ í™•ì¸
sysctl hw.physicalcpu
```

ì•„ë˜ ëª…ë ¹ì–´ë¡œ ë¦¬ì†ŒìŠ¤ ì‚¬ìš©ë¥  í™•ì¸í•  ìˆ˜ ìˆìŒ. </br>
ì‹¤ìŠµìš© ì»¨í…Œì´ë„ˆ ì‹¤í–‰ í›„, ì•„ë˜ ëª…ë ¹ì–´ë¡œ ì‚¬ìš©ë¥  ë° ì‹¤í–‰ë˜ê³  ìˆëŠ” CPU í™•ì¸.
```sh
# top ì»¤ë§¨ë“œë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆìŒ
htop
```

ì‹¤ìŠµìš© ì»¨í…Œì´ë„ˆ ì‹¤í–‰

```sh
# (1) CPU 1ë²ˆì—ì„œ ì‹¤í–‰ // CPU ë²ˆí˜¸ëŠ” 0 ë²ˆ ë¶€í„° ì‹œì‘
docker run --cpuset-cpus 1 --name c1 -d stress stress --cpu 1

# (2) CPU 0 or 1 ì—ì„œ ì‹¤í–‰
docker run --cpuset-cpus 0-1 --name c1 -d stress stress --cpu 1

# (3) CPU ìƒëŒ€ì  ê°€ì¤‘ì¹˜ í• ë‹¹í•˜ì—¬ ì‹¤í–‰
docker run -c 2048 --name c1 -d stress stress --cpu 1
```

## Block I/O ì œí•œ
```sh
# (1) ì¥ì¹˜ì˜ ì“°ê¸° íšŸìˆ˜ì— ëŒ€í•´ dd ëª…ë ¹ì–´ ì†ë„ ì°¨ì´ í™•ì¸.
docker run --rm -it --device-write-iops /dev/xvda:10 ubuntu bash

dd if=/dev/zero of=testfile bs=1M count=10 oflag=direct
```