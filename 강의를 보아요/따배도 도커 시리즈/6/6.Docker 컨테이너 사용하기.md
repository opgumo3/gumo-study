# docker 주요 명령어

## image
```sh
# image 검색
docker search

# image 다운로드
docker pull
# 예시
docker pull nginx # 태그 작성하지 않으면 latest

# 다운받은 image 목록
docker images

# image 삭제
docker rmi
```

```
👉 하나의 이미지에 여러 태그를 달 수 있음.
docker build -t xxx:1 -t xxx:2 .
이미지는 같지만 repository, tag 가 다름.
```

## container
```sh
# 이미지를 바탕으로 컨테이너 생성
docker create
# 예시
docker create --name webserver nginx:1.14 # 기본적으로 background 에서 실행

# 컨테이너 실행
docker start

# 컨테이너 중지
docker stop

# 컨테이너 삭제
docker rm

# 컨테이너에 명령어 실행
docker exec

# 컨테이너 로그 확인
docker logs

# 컨테이너에서 실행중인 프로세스 확인
docker top

# 포그라운드 실행 중인 컨테이너에 연결
docker attach
```
- docker run 은 pull + create + start

```
👉 foreground 실행
터미널 세션을 차지하고, 표준 입력/출력(stdin, stdout, stderr)이 직접 연결된 상태에서 실행되는 것

컨테이너는 PID 1(메인 프로세스)에 종속적임.
```

## 관리
```bash
# 실행중인 컨테이너 목록 확인
docker ps

# Docker object 상세보기
docker inspect
# 예시
docker inspect --format '{{.NetworkSettings.IPAddress}}' webserver
```

```
👉 명령어 별칭 설정 : alias 커맨드
# 설정
alias cip="docker inspect --format '{{.NetworkSettings.IPAddress}}'"

# 사용
cip webserver
```

# 실습
```bash
# nginx 이미지 다운로드 및 컨테이너 생성/실행
docker pull nginx
docker create --name webserver nginx
docker start webserver

# 🔥 docker create/run
docker run -d -p 80:80 --name webserver nginx
=
(docker pull nginx)
docker create -p 80:80 --name webserver nginx
docker start webserver

# 🔥 cip webserver 로 나온 address 로 curl 이 안된다!
# Couldn't connect to server

# 컨테이너에서 실행중인 프로세스 확인
docker top webserver

# bash 실행하여 컨테이너 접속
docker exec -it webserver /bin/bash
# -i : interactive. STDIN 을 열어둔채로 유지
# -t : pseudo TTY (가상 터미널) 할당)
```