## Dockerfile
- Container 를 만들기 위한 명령어 집합.
- 컨테이너 이미지를 생성하기 위한 지시어를 가짐.
- Top-Down 해석
- 작성은 대/소문자 구별하지 않으나 가독성을 위해 구분하여 사용.

## 🤖 자주 사용하는 Dockerfile 문법
| 명령어           | 설명                                                 | 비고                       |
| ------------- | -------------------------------------------------- | ------------------------ |
| `#`           | 주석 (comment)                                       | 가독성 향상에 중요               |
| `FROM`        | 사용할 base image 지정                                  | 항상 필요                    |
| `MAINTAINER`  | 이미지 생성자 정보 (현재는 잘 안 씀, `LABEL` 사용 권장)              | 구버전                      |
| `LABEL`       | 이미지 메타데이터 저장 (예: 버전, 설명 등)                         | 문서화 목적                   |
| `RUN`         | 이미지 빌드 시 실행할 커맨드 (예: `apt install`, `pip install`) | 종종 여러 개 사용               |
| `COPY`        | 호스트의 파일/디렉토리를 컨테이너에 복사                             | 가장 자주 씀                  |
| `ADD`         | `COPY`와 유사하나 tar 압축 해제 및 URL 다운로드 지원               | 기능은 강력하지만 예측 불가성 있음      |
| `WORKDIR`     | 이후 명령이 실행될 작업 디렉터리 설정                              | `cd` 대신 사용               |
| `ENV`         | 환경변수 설정                                            | 반복적으로 쓰는 값 설정에 유용        |
| `USER`        | 명령 실행 및 컨테이너 실행 시 사용할 유저 설정                        | 보안 관점에서 중요               |
| `VOLUME`      | 컨테이너 외부 저장소 연결 (데이터 유지 목적)                         | 데이터 보존 필요할 때             |
| `EXPOSE`      | 컨테이너가 외부와 통신할 포트 지정 (실제 포트 오픈은 아님)                 | 문서화 목적                   |
| `CMD`         | 컨테이너 시작 시 기본 실행 커맨드. 값 치환 가능.                      | 보통 한 개만 사용               |
| `ENTRYPOINT`  | 컨테이너 시작 시 실행할 메인 커맨드                               | `CMD`와 함께 사용 가능. `ENTRYPOINT` 를 명령어, `CMD` 를 argument 로 사용할 수 있음.          |
| `ARG`         | 빌드 시 사용할 변수 지정                                     | `ENV`와 다르게 빌드 타임에만 사용 가능 |
| `HEALTHCHECK` | 컨테이너의 상태를 주기적으로 체크                                 | 운영 환경에서 유용               |

### 예시
```
FROM node:20
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD ["node", "index.js"]
```

### cmd 와 entrypoint
```
FROM ubuntu
ENTRYPOINT ["echo"]
CMD ["hello"]
```
- docker run myimage → echo hello
- docker run myimage world → echo world

## 도커 이미지 생성 및 컨테이너 배포
### 도커 이미지 생성
- Dockerfile 을 이용해 컨테이너 빌드
- `docker build -t hellojs:latest .`

### hub 에 push
- `docker login` : 사용자 인증
- `docker push hellojs:latest`

### hub 둘러보기
- https://hub.docker.com/
