# hellojs
## Dockerfile 생성
- [Dockerfile](./실습/hellojs/dockerfile)

## Build
```
docker build -t hellojs:latest .
```
- 현재 디렉토리에서 도커 이미지를 빌드. 이미지의 이름은 `hellojs`.

```
docker build -t hellojs:latest ./실습/hellojs
```
- `/실습/hellojs` 디렉토리에서 ...


| 옵션            | 의미                                       | 예시                                                   |
| ------------- | ---------------------------------------- | ---------------------------------------------------- |
| `-t, --tag`   | 이미지에 태그(이름:버전)를 붙임                       | `docker build -t myapp:1.0 .`                        |
| `-f, --file`  | `Dockerfile` 위치 지정 (기본은 `./Dockerfile`)  | `docker build -f ./docker/Dockerfile .`              |
| `--build-arg` | Dockerfile 내 `ARG` 변수에 값 전달              | `docker build --build-arg VERSION=1.2 .`             |
| `--no-cache`  | 캐시를 사용하지 않고 모든 레이어를 새로 빌드                | `docker build --no-cache .`                          |
| `--pull`      | 항상 최신 베이스 이미지를 pull                      | `docker build --pull .`                              |
| `--progress`  | 빌드 진행 표시 형식 설정 (`auto`, `plain`, `tty`)  | `docker build --progress=plain .`                    |
| `--platform`  | 빌드할 플랫폼 지정 (멀티아키텍처 빌드 시 사용)              | `docker build --platform=linux/arm64 .`              |
| `--target`    | Dockerfile의 특정 `stage`까지만 빌드 (멀티스테이지 빌드) | `docker build --target builder .`                    |
| `--network`   | 빌드 과정에서 사용할 네트워크 모드 지정                   | `docker build --network=host .`                      |
| `--secret`    | 빌드 시 비밀정보 전달 (BuildKit 필요)               | `docker build --secret id=mysecret,src=secret.txt .` |
| `--ssh`       | SSH 키를 빌드 컨텍스트에서 사용 (BuildKit 필요)        | `docker build --ssh default .`                       |

# webserver
- Dockerfile의 각 RUN, COPY, ADD 명령어는 새로운 레이어(layer)를 만듦.
- 컨테이너 실행 속도에는 거의 영향 없으나 이미지 크기, 빌드 효율성 측면에서 불필요하게 많으면 좋지 않음

```
RUN apt update
RUN apt install -y curl vim

RUN apt update && apt install -y curl vim && rm -rf /var/lib/apt/lists/*
```

## Build
```
docker build -t webserver .
```

## Docker hub 에 Push
```
# docker login
docker login

# tag 변경
docker tag [old] [username/new]

# push
docker push [username/new]
```